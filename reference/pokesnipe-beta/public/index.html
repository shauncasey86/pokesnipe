<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PokeSnipe â€” Card Arbitrage Finder</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ´</text></svg>">
  
  <!-- Fonts - DM Sans for clean geometric look -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header__brand">
      <h1 class="header__logo">PokeSnipe</h1>
      <span class="header__tagline">Dashboard</span>

      <!-- Navigation -->
      <nav class="header__nav">
        <a href="/" class="nav-link active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="9"/>
            <rect x="14" y="3" width="7" height="5"/>
            <rect x="14" y="12" width="7" height="9"/>
            <rect x="3" y="16" width="7" height="5"/>
          </svg>
          Dashboard
        </a>
        <a href="/preferences.html" class="nav-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          Settings
        </a>
        <a href="/training.html" class="nav-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
          </svg>
          Training
        </a>
      </nav>
    </div>

    <div class="header__actions">
      <div class="header__search">
        <input type="text" id="search-input" class="header__input" placeholder="pokemon charizard...">
        <button id="search-btn" class="btn btn--primary btn--small">Find</button>
      </div>

      <div class="header__controls">
        <button id="toggle-btn" class="btn btn--toggle">Start Scanner</button>
        <button id="theme-toggle" class="btn btn--icon" title="Toggle Theme" aria-label="Toggle theme">
          <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </div>
    </div>
    
    <div class="header__status" id="status-indicator">
      <span class="status-dot"></span>
      <span class="status-text">Idle</span>
    </div>
  </header>

  <!-- Activity Log Panel (collapsible) -->
  <aside class="activity-log" id="activity-log" hidden>
    <div class="activity-log__header">
      <h3 class="activity-log__title">Scan Activity</h3>
      <div class="activity-log__actions">
        <span class="activity-log__count" id="log-count">0 entries</span>
        <button class="activity-log__clear" id="log-clear" title="Clear logs">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
          </svg>
        </button>
        <button class="activity-log__close" id="log-close" title="Close panel">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="activity-log__list" id="log-list">
      <div class="activity-log__empty">No activity yet</div>
    </div>
  </aside>

  <!-- Diagnostics Panel (collapsible) -->
  <aside class="diagnostics-panel" id="diagnostics-panel" hidden>
    <div class="diagnostics-panel__header">
      <h3 class="diagnostics-panel__title">Match Diagnostics</h3>
      <div class="diagnostics-panel__actions">
        <button class="diagnostics-panel__action" id="diagnostics-copy" title="Copy JSON">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
          </svg>
        </button>
        <button class="diagnostics-panel__action" id="diagnostics-reset" title="Reset session">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="1 4 1 10 7 10"/>
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
          </svg>
        </button>
        <button class="diagnostics-panel__close" id="diagnostics-close" title="Close panel">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="diagnostics-panel__content">
      <!-- Tabs -->
      <div class="diagnostics-tabs">
        <button class="diagnostics-tab diagnostics-tab--active" data-view="session">Session (<span id="diag-scan-count">0</span> scans)</button>
        <button class="diagnostics-tab" data-view="lastScan">Last Scan</button>
      </div>

      <!-- Summary Stats -->
      <div class="diagnostics-panel__summary">
        <div class="diagnostics-stat diagnostics-stat--highlight">
          <span class="diagnostics-stat__value" id="diag-match-rate">â€”</span>
          <span class="diagnostics-stat__label">Match Rate</span>
        </div>
        <div class="diagnostics-stat">
          <span class="diagnostics-stat__value" id="diag-total-scanned">â€”</span>
          <span class="diagnostics-stat__label">Scanned</span>
        </div>
        <div class="diagnostics-stat">
          <span class="diagnostics-stat__value" id="diag-matches">â€”</span>
          <span class="diagnostics-stat__label">Matched</span>
        </div>
        <div class="diagnostics-stat">
          <span class="diagnostics-stat__value" id="diag-deals">â€”</span>
          <span class="diagnostics-stat__label">Deals</span>
        </div>
      </div>

      <!-- Failure Breakdown -->
      <div class="diagnostics-panel__breakdown">
        <h4 class="diagnostics-panel__subtitle">Failure Breakdown</h4>
        <div class="diagnostics-bars" id="diagnostics-bars">
          <div class="diagnostics-bar" data-stage="lowConfidence">
            <span class="diagnostics-bar__label">Low Confidence</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-lowConfidence"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-lowConfidence">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="noExpansionMatch">
            <span class="diagnostics-bar__label">No Set Match</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-noExpansionMatch"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-noExpansionMatch">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="noCardNumber">
            <span class="diagnostics-bar__label">No Card Number</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-noCardNumber"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-noCardNumber">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="scrydexNotFound">
            <span class="diagnostics-bar__label">Scrydex Not Found</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-scrydexNotFound"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-scrydexNotFound">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="nameMismatch">
            <span class="diagnostics-bar__label">Name Mismatch</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-nameMismatch"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-nameMismatch">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="noPriceMatch">
            <span class="diagnostics-bar__label">No Price Data</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-noPriceMatch"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-noPriceMatch">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="nonEnglish">
            <span class="diagnostics-bar__label">Non-English</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-nonEnglish"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-nonEnglish">0</span>
          </div>
          <div class="diagnostics-bar" data-stage="belowProfit">
            <span class="diagnostics-bar__label">Below Min Profit</span>
            <div class="diagnostics-bar__track">
              <div class="diagnostics-bar__fill" id="bar-belowProfit"></div>
            </div>
            <span class="diagnostics-bar__value" id="val-belowProfit">0</span>
          </div>
        </div>
      </div>

      <p class="diagnostics-panel__hint" id="diagnostics-hint">Cumulative session results</p>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main">
    <!-- Featured Section -->
    <section class="featured" id="featured-section" hidden>
      <div class="featured__label">Best Opportunity</div>
      <article class="featured__card" id="featured-card">
        <div class="featured__image-wrap">
          <img id="featured-img" class="featured__image" src="" alt="">
          <span class="featured__discount" id="featured-discount">-0%</span>
          <span class="featured__intl-badge" id="featured-intl-badge" hidden>INTL</span>
        </div>
        <div class="featured__content">
          <div class="featured__header">
            <h2 class="featured__name" id="featured-name">Card Name</h2>
            <div class="featured__meta">
              <img class="featured__logo" id="featured-logo" src="" alt="">
              <span id="featured-expansion">Expansion</span>
              <span class="featured__divider">â€¢</span>
              <span id="featured-number">#000</span>
              <span class="featured__condition" id="featured-condition">Raw</span>
            </div>
          </div>
          <div class="featured__prices">
            <div class="featured__price-row">
              <span class="featured__price-label">eBay Price</span>
              <span class="featured__price-value" id="featured-ebay">Â£0.00</span>
            </div>
            <div class="featured__price-row">
              <span class="featured__price-label">+ Shipping</span>
              <span class="featured__price-value featured__price-value--muted" id="featured-shipping">Free</span>
            </div>
            <div class="featured__price-row featured__price-row--total">
              <span class="featured__price-label">Total Cost</span>
              <span class="featured__price-value" id="featured-total">Â£0.00</span>
            </div>
            <div class="featured__price-row">
              <span class="featured__price-label">Market Value</span>
              <span class="featured__price-value featured__price-value--highlight" id="featured-market">Â£0.00</span>
            </div>
            <div class="featured__price-row featured__price-row--profit">
              <span class="featured__price-label">Profit</span>
              <span class="featured__price-value featured__price-value--profit" id="featured-profit">+Â£0.00</span>
            </div>
          </div>
          <a id="featured-cta" href="#" target="_blank" rel="noopener noreferrer" class="featured__cta">
            View on eBay â†’
          </a>
        </div>
      </article>
    </section>

    <!-- Deals Section -->
    <section class="deals" aria-live="polite">
      <div class="deals__toolbar">
        <div class="deals__filters-wrap">
          <div class="deals__filters" role="group" aria-label="Filter by value">
            <button class="filter-btn filter-btn--active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="high">High Value</button>
            <button class="filter-btn" data-filter="moderate">Moderate</button>
          </div>
          <div class="deals__filters deals__filters--type" role="group" aria-label="Filter by card type">
            <button class="type-filter-btn type-filter-btn--active" data-type="all">All Cards</button>
            <button class="type-filter-btn" data-type="raw">Raw</button>
            <button class="type-filter-btn" data-type="graded">Graded</button>
          </div>
        </div>
        <div class="deals__info">
          <span class="deals__count"><span id="deals-count">0</span> opportunities</span>
        </div>
        <div class="deals__view-toggle" role="group" aria-label="View mode">
          <button class="view-btn view-btn--active" data-view="grid" title="Grid view">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <rect x="3" y="3" width="7" height="7" rx="1"/>
              <rect x="14" y="3" width="7" height="7" rx="1"/>
              <rect x="3" y="14" width="7" height="7" rx="1"/>
              <rect x="14" y="14" width="7" height="7" rx="1"/>
            </svg>
          </button>
          <button class="view-btn" data-view="table" title="Table view">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <rect x="3" y="4" width="18" height="4" rx="1"/>
              <rect x="3" y="10" width="18" height="4" rx="1"/>
              <rect x="3" y="16" width="18" height="4" rx="1"/>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Grid View -->
      <div class="deals-grid" id="deals-grid"></div>
      
      <!-- Table View -->
      <div class="deals-table-container" id="deals-table-container" hidden>
        <table class="deals-table">
          <thead>
            <tr>
              <th>Card</th>
              <th>Expansion</th>
              <th>Condition</th>
              <th class="text-right">Cost</th>
              <th class="text-right">Market</th>
              <th class="text-right">Profit</th>
              <th class="text-right">Margin</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="deals-table-body"></tbody>
        </table>
      </div>
      
      <!-- Empty State -->
      <div class="empty-state" id="empty-state">
        <div class="empty-state__icon">ðŸ“‹</div>
        <h3 class="empty-state__title">No opportunities yet</h3>
        <p class="empty-state__text">Start the scanner to find underpriced cards on eBay</p>
      </div>
    </section>
  </main>

  <!-- Footer Stats (Sticky) -->
  <footer class="footer">
    <div class="footer__stats">
      <div class="footer__stat footer__stat--ebay" title="eBay API Status">
        <span class="footer__stat-label">eBay</span>
        <span class="footer__stat-value">
          <span class="ebay-status" id="ebay-status" title="Checking...">
            <span class="ebay-status__dot"></span>
            <span class="ebay-status__text" id="ebay-status-text">â€”</span>
          </span>
        </span>
      </div>
      <div class="footer__stat footer__stat--rate">
        <span class="footer__stat-label">Exchange Rate</span>
        <span class="footer__stat-value">
          <span class="rate-status" id="rate-status" title="Checking...">
            <span class="rate-status__dot"></span>
          </span>
          $<span id="stat-rate">1.27</span>/Â£
        </span>
      </div>
      <div class="footer__stat" title="Monthly Scrydex API usage">
        <span class="footer__stat-label">API Usage</span>
        <span class="footer__stat-value"><span id="stat-credits">0</span> / <span id="stat-credits-max">50,000</span></span>
      </div>
      <div class="footer__stat" title="Credits consumed today">
        <span class="footer__stat-label">Today</span>
        <span class="footer__stat-value"><span id="stat-daily-budget">0</span></span>
      </div>
      <div class="footer__stat footer__stat--scan">
        <span class="footer__stat-label">Next Scan</span>
        <span class="footer__stat-value" id="stat-next-scan">â€”</span>
      </div>
      <div class="footer__stat footer__stat--query">
        <span class="footer__stat-label">Next Query</span>
        <span class="footer__stat-value footer__stat-value--query" id="stat-next-query" title="">â€”</span>
      </div>
    </div>
    <div class="footer__actions">
      <div class="footer__icon-group">
        <button id="diagnostics-toggle" class="btn btn--icon" title="Match Diagnostics">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 20V10"/>
            <path d="M12 20V4"/>
            <path d="M6 20v-6"/>
          </svg>
        </button>
        <button id="log-toggle" class="btn btn--icon" title="Scan Activity">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="4 17 10 11 4 5"/>
            <line x1="12" y1="19" x2="20" y2="19"/>
          </svg>
        </button>
      </div>
      <button id="clear-btn" class="btn btn--danger btn--small">Clear All</button>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal" id="modal">
      <button class="modal__close" id="modal-close" aria-label="Close">Ã—</button>
      
      <div class="modal__layout">
        <!-- Left: Card Image + Match Info + Seller Info -->
        <div class="modal__sidebar">
          <div class="modal__image-card">
            <img id="modal-reference-img" src="" alt="" class="modal__img">
          </div>
          
          <!-- Match Info (under image, with details) -->
          <div class="match-info" id="match-info-section">
            <div class="match-info__header">
              <div class="match-info__gauge">
                <svg viewBox="0 0 48 48">
                  <circle class="match-info__ring" cx="24" cy="24" r="20"/>
                  <circle class="match-info__fill" id="match-gauge-fill" cx="24" cy="24" r="20" 
                          stroke-dasharray="125.6" stroke-dashoffset="125.6"/>
                </svg>
                <span class="match-info__percent" id="match-percent">0%</span>
              </div>
              <div class="match-info__summary">
                <span class="match-info__label" id="match-label">Match Confidence</span>
                <span class="match-info__desc" id="match-desc">â€”</span>
              </div>
            </div>
            <div class="match-info__details" id="match-breakdown">
              <!-- Populated by JS with match breakdown -->
            </div>
          </div>
          
          <!-- Seller Info (new section) -->
          <div class="seller-info" id="seller-info-section">
            <h4 class="seller-info__title">Seller</h4>
            <div class="seller-info__content">
              <div class="seller-info__row">
                <span class="seller-info__label">Name</span>
                <span class="seller-info__value" id="seller-name">â€”</span>
              </div>
              <div class="seller-info__row">
                <span class="seller-info__label">Feedback</span>
                <span class="seller-info__value" id="seller-feedback">â€”</span>
              </div>
            </div>
          </div>

          <!-- Feedback Section -->
          <div class="feedback-section" id="feedback-section">
            <!-- Initial button -->
            <button class="feedback-btn" id="feedback-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              Report Wrong Match
            </button>

            <!-- Reason selection (hidden by default) -->
            <div class="feedback-reasons" id="feedback-reasons" style="display: none;">
              <p class="feedback-reasons__title">What was incorrect?</p>
              <div class="feedback-reasons__grid">
                <button class="feedback-reason-btn" data-reason="card_name" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Card Name
                </button>
                <button class="feedback-reason-btn" data-reason="card_number" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 7V4h16v3"/>
                    <path d="M9 20h6"/>
                    <path d="M12 4v16"/>
                  </svg>
                  Card Number
                </button>
                <button class="feedback-reason-btn" data-reason="set" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                  </svg>
                  Set/Expansion
                </button>
                <button class="feedback-reason-btn" data-reason="condition" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  Condition
                </button>
                <button class="feedback-reason-btn feedback-reason-btn--wide" data-reason="wrong_card" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
                  </svg>
                  Wrong Card (data correct, different card matched)
                </button>
                <button class="feedback-reason-btn feedback-reason-btn--wide" data-reason="wrong_price" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23"/>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                  </svg>
                  Wrong Price (wrong grade/condition price used)
                </button>
                <button class="feedback-reason-btn feedback-reason-btn--wide" data-reason="incorrect_language" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M2 12h20"/>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                  </svg>
                  Incorrect Language (listing not in English)
                </button>
                <button class="feedback-reason-btn feedback-reason-btn--wide" data-reason="price_discrepancy" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                  </svg>
                  Price Discrepancy (market price seems wrong)
                </button>
              </div>
              <button class="feedback-cancel-btn" id="feedback-cancel" type="button">Cancel</button>
            </div>

            <p class="feedback-section__hint" id="feedback-hint">Help improve matching accuracy</p>
          </div>

          <!-- Mark as Sold Section -->
          <div class="sold-section" id="sold-section">
            <button class="sold-btn" id="sold-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"/>
              </svg>
              Mark as Sold
            </button>
            <p class="sold-section__hint">Remove from dashboard</p>
          </div>
        </div>

        <!-- Right: Info -->
        <div class="modal__info">
          <header class="modal__header">
            <h2 class="modal__title" id="modal-title">Card Name</h2>
            <div class="modal__meta">
              <img class="modal__logo" id="modal-logo" src="" alt="">
              <span class="modal__divider">â€¢</span>
              <img class="modal__symbol" id="modal-symbol" src="" alt="">
              <span class="modal__divider">â€¢</span>
              <span id="modal-expansion">Expansion</span>
              <span class="modal__divider">â€¢</span>
              <span id="modal-number">#001/100</span>
              <span class="modal__divider" id="modal-release-divider">â€¢</span>
              <span id="modal-release" class="modal__release">2024</span>
            </div>
            <!-- eBay Listing Title -->
            <p class="modal__listing-title" id="modal-listing-title">eBay listing title appears here</p>
          </header>
          
          <!-- CTA - Moved to top for prominence -->
          <a id="modal-cta" href="#" target="_blank" rel="noopener noreferrer" class="modal__cta">
            <span class="modal__cta-icon">ðŸ›’</span>
            View on eBay
            <span class="modal__cta-arrow">â†’</span>
          </a>
          
          <!-- The Opportunity -->
          <section class="modal__section">
            <h3 class="modal__section-title">The Opportunity</h3>
            <div class="opportunity-breakdown">
              <div class="opportunity-grid">
                <div class="opportunity-card opportunity-card--cost">
                  <span class="opportunity-card__label">Total Cost</span>
                  <span class="opportunity-card__value" id="modal-total-cost">Â£0.00</span>
                  <span class="opportunity-card__detail">
                    <span id="modal-ebay-price">Â£0.00</span> + <span id="modal-shipping">Free</span> shipping
                  </span>
                </div>
                <div class="opportunity-card opportunity-card--market">
                  <span class="opportunity-card__label">Market Value</span>
                  <span class="opportunity-card__value" id="modal-market-value">Â£0.00</span>
                  <span class="opportunity-card__detail" id="modal-condition">(NM Raw)</span>
                </div>
              </div>
              <div class="opportunity-result">
                <div class="opportunity-result__row">
                  <span class="opportunity-result__label">Potential Profit</span>
                  <span class="opportunity-result__value opportunity-result__value--profit" id="modal-profit">+Â£0.00</span>
                </div>
                <div class="opportunity-result__row">
                  <span class="opportunity-result__label">Margin</span>
                  <span class="opportunity-result__value opportunity-result__value--margin" id="modal-margin">0%</span>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Market Prices -->
          <section class="modal__section">
            <h3 class="modal__section-title">Market Prices</h3>
            
            <!-- Raw Prices -->
            <div id="raw-prices-section">
              <h4 class="modal__subsection-title">Raw Prices (by condition)</h4>
              <div class="price-grid" id="raw-prices-grid"></div>
            </div>
            
            <!-- Graded Prices -->
            <div id="graded-prices-section" style="margin-top: var(--space-md);">
              <h4 class="modal__subsection-title">Graded Prices</h4>
              <div class="graded-tabs" id="graded-tabs" role="tablist"></div>
              <div class="price-grid" id="graded-prices-grid"></div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container" aria-live="polite"></div>

  <script src="/js/app.js"></script>
</body>
</html>